{"ast":null,"code":"import $ from './Dom.mjs';\nimport { dataPriv } from './vars.mjs';\nconst animationKey = 'animationFrameId';\nconst cssReset = {};\ncssReset['transition-property'] = cssReset['transition-duration'] = cssReset['transition-delay'] = cssReset['transition-timing-function'] = cssReset['animation-name'] = cssReset['animation-duration'] = cssReset['animation-delay'] = cssReset['animation-timing-function'] = '';\nexport function animate(properties, opt = {}) {\n  this.stop();\n  for (let i = 0; i < this.length; i++) {\n    animateNode(this[i], properties, opt);\n  }\n  return this;\n}\nfunction animateNode(el, properties, opt = {}) {\n  let {\n    duration = 400,\n    easing = 'ease-in-out',\n    delay = 0,\n    complete\n  } = opt;\n  const delayId = setTimeout(function () {\n    const $el = $(el);\n    let fired = false;\n    let endEvent = 'transitionend';\n\n    // Convert milliseconds to seconds for CSS\n    duration = duration / 1000;\n    delay = delay / 1000;\n\n    // Set up CSS values for transition or keyframe animation\n    const cssValues = {};\n    if (typeof properties === 'string') {\n      // Keyframe animation\n      cssValues['animation-name'] = properties;\n      cssValues['animation-duration'] = duration + 's';\n      cssValues['animation-delay'] = delay + 's';\n      cssValues['animation-timing-function'] = easing;\n      endEvent = 'animationend';\n    } else {\n      // CSS transitions\n      const transitionProperties = [];\n      for (var key in properties) {\n        if (properties.hasOwnProperty(key)) {\n          cssValues[key] = properties[key];\n          transitionProperties.push(key);\n        }\n      }\n      if (duration > 0) {\n        cssValues['transition-property'] = transitionProperties.join(', ');\n        cssValues['transition-duration'] = duration + 's';\n        cssValues['transition-delay'] = delay + 's';\n        cssValues['transition-timing-function'] = easing;\n      }\n    }\n    const wrappedCallback = function (event) {\n      if (event) {\n        if (event.target !== event.currentTarget) return; // makes sure the event didn't bubble from \"below\"\n        event.target.removeEventListener(endEvent, wrappedCallback);\n      } else {\n        el.removeEventListener(endEvent, wrappedCallback); // triggered by setTimeout\n      }\n      fired = true;\n      $el.css(cssReset);\n      complete && complete.call(el);\n    };\n    if (duration > 0) {\n      el.addEventListener(endEvent, wrappedCallback);\n      // transitionEnd is not always firing on older Android phones\n      // so make sure it gets fired\n      const callbackId = setTimeout(function () {\n        if (fired) return;\n        wrappedCallback(null);\n      }, (duration + delay) * 1000 + 25);\n      dataPriv.set(el, animationKey, {\n        id: callbackId,\n        stop: () => {\n          clearTimeout(callbackId);\n          el.removeEventListener(endEvent, wrappedCallback);\n        }\n      });\n    }\n    $el.css(cssValues);\n    if (duration <= 0) {\n      wrappedCallback(null);\n    }\n  });\n  dataPriv.set(el, animationKey, {\n    stop: () => clearTimeout(delayId)\n  });\n}\nexport function stop() {\n  for (let i = 0; i < this.length; i++) {\n    const el = this[i];\n    const animation = dataPriv.get(el, animationKey);\n    if (!animation) continue;\n    animation.stop();\n    dataPriv.remove(el, animationKey);\n  }\n  this.css(cssReset);\n  return this;\n}","map":{"version":3,"names":["$","dataPriv","animationKey","cssReset","animate","properties","opt","stop","i","length","animateNode","el","duration","easing","delay","complete","delayId","setTimeout","$el","fired","endEvent","cssValues","transitionProperties","key","hasOwnProperty","push","join","wrappedCallback","event","target","currentTarget","removeEventListener","css","call","addEventListener","callbackId","set","id","clearTimeout","animation","get","remove"],"sources":["/Users/guankaiyuan/ReactTs/node_modules/.pnpm/@joint+core@4.0.1/node_modules/@joint/core/src/mvc/Dom/animations.mjs"],"sourcesContent":["import $ from './Dom.mjs';\nimport { dataPriv } from './vars.mjs';\n\nconst animationKey = 'animationFrameId';\nconst cssReset = {};\n\ncssReset['transition-property'] =\ncssReset['transition-duration'] =\ncssReset['transition-delay'] =\ncssReset['transition-timing-function'] =\ncssReset['animation-name'] =\ncssReset['animation-duration'] =\ncssReset['animation-delay'] =\ncssReset['animation-timing-function'] = '';\n\nexport function animate(properties, opt = {}) {\n    this.stop();\n    for (let i = 0; i < this.length; i++) {\n        animateNode(this[i], properties, opt);\n    }\n    return this;\n}\n\nfunction animateNode(el, properties, opt = {}) {\n\n    let {\n        duration = 400,\n        easing = 'ease-in-out',\n        delay = 0,\n        complete\n    } = opt;\n\n    const delayId = setTimeout(function() {\n\n        const $el = $(el);\n        let fired = false;\n        let endEvent = 'transitionend';\n\n        // Convert milliseconds to seconds for CSS\n        duration = duration / 1000;\n        delay = delay / 1000;\n\n        // Set up CSS values for transition or keyframe animation\n        const cssValues = {};\n        if (typeof properties === 'string') {\n            // Keyframe animation\n            cssValues['animation-name'] = properties;\n            cssValues['animation-duration'] = duration + 's';\n            cssValues['animation-delay'] = delay + 's';\n            cssValues['animation-timing-function'] = easing;\n            endEvent = 'animationend';\n        } else {\n            // CSS transitions\n            const transitionProperties = [];\n            for (var key in properties) {\n                if (properties.hasOwnProperty(key)) {\n                    cssValues[key] = properties[key];\n                    transitionProperties.push(key);\n                }\n            }\n\n            if (duration > 0) {\n                cssValues['transition-property'] = transitionProperties.join(', ');\n                cssValues['transition-duration'] = duration + 's';\n                cssValues['transition-delay'] = delay + 's';\n                cssValues['transition-timing-function'] = easing;\n            }\n        }\n\n        const wrappedCallback = function(event){\n            if (event) {\n                if (event.target !== event.currentTarget) return; // makes sure the event didn't bubble from \"below\"\n                event.target.removeEventListener(endEvent, wrappedCallback);\n            } else {\n                el.removeEventListener(endEvent, wrappedCallback); // triggered by setTimeout\n            }\n            fired = true;\n            $el.css(cssReset);\n            complete && complete.call(el);\n        };\n\n        if (duration > 0){\n            el.addEventListener(endEvent, wrappedCallback);\n            // transitionEnd is not always firing on older Android phones\n            // so make sure it gets fired\n            const callbackId = setTimeout(function() {\n                if (fired) return;\n                wrappedCallback(null);\n            }, ((duration + delay) * 1000) + 25);\n\n            dataPriv.set(el, animationKey, {\n                id: callbackId,\n                stop: () => {\n                    clearTimeout(callbackId);\n                    el.removeEventListener(endEvent, wrappedCallback);\n                }\n            });\n        }\n\n        $el.css(cssValues);\n\n        if (duration <= 0) {\n            wrappedCallback(null);\n        }\n    });\n\n    dataPriv.set(el, animationKey, {\n        stop: () => clearTimeout(delayId)\n    });\n}\n\nexport function stop() {\n    for (let i = 0; i < this.length; i++) {\n        const el = this[i];\n        const animation = dataPriv.get(el, animationKey);\n        if (!animation) continue;\n        animation.stop();\n        dataPriv.remove(el, animationKey);\n    }\n    this.css(cssReset);\n    return this;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}