{"ast":null,"code":"import { assign, isPlainObject } from '../../util/util.mjs';\nfunction contextMarker(context) {\n  var marker = {};\n  // Stroke\n  // The context 'fill' is disregarded here. The usual case is to use the marker with a connection\n  // (for which 'fill' attribute is set to 'none').\n  var stroke = context.stroke;\n  if (typeof stroke === 'string') {\n    marker['stroke'] = stroke;\n    marker['fill'] = stroke;\n  }\n  // Opacity\n  // Again the context 'fill-opacity' is ignored.\n  var strokeOpacity = context['stroke-opacity'];\n  if (strokeOpacity === undefined) strokeOpacity = context.opacity;\n  if (strokeOpacity !== undefined) {\n    marker['stroke-opacity'] = strokeOpacity;\n    marker['fill-opacity'] = strokeOpacity;\n  }\n  return marker;\n}\nfunction setPaintURL(def) {\n  const {\n    paper\n  } = this;\n  const url = def.type === 'pattern' ? paper.definePattern(def) : paper.defineGradient(def);\n  return `url(#${url})`;\n}\nconst defsAttributesNS = {\n  'source-marker': {\n    qualify: isPlainObject,\n    set: function (marker, refBBox, node, attrs) {\n      marker = assign(contextMarker(attrs), marker);\n      return {\n        'marker-start': 'url(#' + this.paper.defineMarker(marker) + ')'\n      };\n    }\n  },\n  'target-marker': {\n    qualify: isPlainObject,\n    set: function (marker, refBBox, node, attrs) {\n      marker = assign(contextMarker(attrs), {\n        'transform': 'rotate(180)'\n      }, marker);\n      return {\n        'marker-end': 'url(#' + this.paper.defineMarker(marker) + ')'\n      };\n    }\n  },\n  'vertex-marker': {\n    qualify: isPlainObject,\n    set: function (marker, refBBox, node, attrs) {\n      marker = assign(contextMarker(attrs), marker);\n      return {\n        'marker-mid': 'url(#' + this.paper.defineMarker(marker) + ')'\n      };\n    }\n  },\n  'fill': {\n    qualify: isPlainObject,\n    set: setPaintURL\n  },\n  'stroke': {\n    qualify: isPlainObject,\n    set: setPaintURL\n  },\n  'filter': {\n    qualify: isPlainObject,\n    set: function (filter) {\n      return 'url(#' + this.paper.defineFilter(filter) + ')';\n    }\n  }\n};\nexport default defsAttributesNS;","map":{"version":3,"names":["assign","isPlainObject","contextMarker","context","marker","stroke","strokeOpacity","undefined","opacity","setPaintURL","def","paper","url","type","definePattern","defineGradient","defsAttributesNS","qualify","set","refBBox","node","attrs","defineMarker","filter","defineFilter"],"sources":["/Users/guankaiyuan/ReactTs/node_modules/.pnpm/@joint+core@4.0.1/node_modules/@joint/core/src/dia/attributes/defs.mjs"],"sourcesContent":["import { assign, isPlainObject } from '../../util/util.mjs';\n\nfunction contextMarker(context) {\n    var marker = {};\n    // Stroke\n    // The context 'fill' is disregarded here. The usual case is to use the marker with a connection\n    // (for which 'fill' attribute is set to 'none').\n    var stroke = context.stroke;\n    if (typeof stroke === 'string') {\n        marker['stroke'] = stroke;\n        marker['fill'] = stroke;\n    }\n    // Opacity\n    // Again the context 'fill-opacity' is ignored.\n    var strokeOpacity = context['stroke-opacity'];\n    if (strokeOpacity === undefined) strokeOpacity = context.opacity;\n    if (strokeOpacity !== undefined) {\n        marker['stroke-opacity'] = strokeOpacity;\n        marker['fill-opacity'] = strokeOpacity;\n    }\n    return marker;\n}\n\nfunction setPaintURL(def) {\n    const { paper } = this;\n    const url = (def.type === 'pattern')\n        ? paper.definePattern(def)\n        : paper.defineGradient(def);\n    return `url(#${url})`;\n}\n\nconst defsAttributesNS = {\n\n    'source-marker': {\n        qualify: isPlainObject,\n        set: function(marker, refBBox, node, attrs) {\n            marker = assign(contextMarker(attrs), marker);\n            return { 'marker-start': 'url(#' + this.paper.defineMarker(marker) + ')' };\n        }\n    },\n\n    'target-marker': {\n        qualify: isPlainObject,\n        set: function(marker, refBBox, node, attrs) {\n            marker = assign(contextMarker(attrs), { 'transform': 'rotate(180)' }, marker);\n            return { 'marker-end': 'url(#' + this.paper.defineMarker(marker) + ')' };\n        }\n    },\n\n    'vertex-marker': {\n        qualify: isPlainObject,\n        set: function(marker, refBBox, node, attrs) {\n            marker = assign(contextMarker(attrs), marker);\n            return { 'marker-mid': 'url(#' + this.paper.defineMarker(marker) + ')' };\n        }\n    },\n\n    'fill': {\n        qualify: isPlainObject,\n        set: setPaintURL\n    },\n\n    'stroke': {\n        qualify: isPlainObject,\n        set: setPaintURL\n    },\n\n    'filter': {\n        qualify: isPlainObject,\n        set: function(filter) {\n            return 'url(#' + this.paper.defineFilter(filter) + ')';\n        }\n    },\n};\n\nexport default defsAttributesNS;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}