{"ast":null,"code":"import { isCalcAttribute, evalCalcAttribute } from './calc.mjs';\nconst calcAttributesList = ['transform', 'x', 'y', 'cx', 'cy', 'dx', 'dy', 'x1', 'y1', 'x2', 'y2', 'points', 'd', 'r', 'rx', 'ry', 'width', 'height', 'stroke-width', 'font-size'];\nconst positiveValueList = ['r', 'rx', 'ry', 'width', 'height', 'stroke-width', 'font-size'];\nconst calcAttributes = calcAttributesList.reduce((acc, attrName) => {\n  acc[attrName] = true;\n  return acc;\n}, {});\nconst positiveValueAttributes = positiveValueList.reduce((acc, attrName) => {\n  acc[attrName] = true;\n  return acc;\n}, {});\nexport function evalAttributes(attrs, refBBox) {\n  const evalAttrs = {};\n  for (let attrName in attrs) {\n    if (!attrs.hasOwnProperty(attrName)) continue;\n    evalAttrs[attrName] = evalAttribute(attrName, attrs[attrName], refBBox);\n  }\n  return evalAttrs;\n}\nexport function evalAttribute(attrName, attrValue, refBBox) {\n  if (attrName in calcAttributes && isCalcAttribute(attrValue)) {\n    let evalAttrValue = evalCalcAttribute(attrValue, refBBox);\n    if (attrName in positiveValueAttributes) {\n      evalAttrValue = Math.max(0, evalAttrValue);\n    }\n    return evalAttrValue;\n  }\n  return attrValue;\n}","map":{"version":3,"names":["isCalcAttribute","evalCalcAttribute","calcAttributesList","positiveValueList","calcAttributes","reduce","acc","attrName","positiveValueAttributes","evalAttributes","attrs","refBBox","evalAttrs","hasOwnProperty","evalAttribute","attrValue","evalAttrValue","Math","max"],"sources":["/Users/guankaiyuan/ReactTs/node_modules/.pnpm/@joint+core@4.0.1/node_modules/@joint/core/src/dia/attributes/eval.mjs"],"sourcesContent":["import { isCalcAttribute, evalCalcAttribute } from './calc.mjs';\n\nconst calcAttributesList = [\n    'transform',\n    'x',\n    'y',\n    'cx',\n    'cy',\n    'dx',\n    'dy',\n    'x1',\n    'y1',\n    'x2',\n    'y2',\n    'points',\n    'd',\n    'r',\n    'rx',\n    'ry',\n    'width',\n    'height',\n    'stroke-width',\n    'font-size',\n];\n\nconst positiveValueList = [\n    'r',\n    'rx',\n    'ry',\n    'width',\n    'height',\n    'stroke-width',\n    'font-size',\n];\n\nconst calcAttributes = calcAttributesList.reduce((acc, attrName) => {\n    acc[attrName] = true;\n    return acc;\n}, {});\n\nconst positiveValueAttributes = positiveValueList.reduce((acc, attrName) => {\n    acc[attrName] = true;\n    return acc;\n}, {});\n\nexport function evalAttributes(attrs, refBBox) {\n    const evalAttrs = {};\n    for (let attrName in attrs) {\n        if (!attrs.hasOwnProperty(attrName)) continue;\n        evalAttrs[attrName] = evalAttribute(attrName, attrs[attrName], refBBox);\n    }\n    return evalAttrs;\n}\n\nexport function evalAttribute(attrName, attrValue, refBBox) {\n    if (attrName in calcAttributes && isCalcAttribute(attrValue)) {\n        let evalAttrValue = evalCalcAttribute(attrValue, refBBox);\n        if (attrName in positiveValueAttributes) {\n            evalAttrValue = Math.max(0, evalAttrValue);\n        }\n        return evalAttrValue;\n    }\n    return attrValue;\n}\n"],"mappings":"AAAA,SAASA,eAAe,EAAEC,iBAAiB,QAAQ,YAAY;AAE/D,MAAMC,kBAAkB,GAAG,CACvB,WAAW,EACX,GAAG,EACH,GAAG,EACH,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,QAAQ,EACR,GAAG,EACH,GAAG,EACH,IAAI,EACJ,IAAI,EACJ,OAAO,EACP,QAAQ,EACR,cAAc,EACd,WAAW,CACd;AAED,MAAMC,iBAAiB,GAAG,CACtB,GAAG,EACH,IAAI,EACJ,IAAI,EACJ,OAAO,EACP,QAAQ,EACR,cAAc,EACd,WAAW,CACd;AAED,MAAMC,cAAc,GAAGF,kBAAkB,CAACG,MAAM,CAAC,CAACC,GAAG,EAAEC,QAAQ,KAAK;EAChED,GAAG,CAACC,QAAQ,CAAC,GAAG,IAAI;EACpB,OAAOD,GAAG;AACd,CAAC,EAAE,CAAC,CAAC,CAAC;AAEN,MAAME,uBAAuB,GAAGL,iBAAiB,CAACE,MAAM,CAAC,CAACC,GAAG,EAAEC,QAAQ,KAAK;EACxED,GAAG,CAACC,QAAQ,CAAC,GAAG,IAAI;EACpB,OAAOD,GAAG;AACd,CAAC,EAAE,CAAC,CAAC,CAAC;AAEN,OAAO,SAASG,cAAcA,CAACC,KAAK,EAAEC,OAAO,EAAE;EAC3C,MAAMC,SAAS,GAAG,CAAC,CAAC;EACpB,KAAK,IAAIL,QAAQ,IAAIG,KAAK,EAAE;IACxB,IAAI,CAACA,KAAK,CAACG,cAAc,CAACN,QAAQ,CAAC,EAAE;IACrCK,SAAS,CAACL,QAAQ,CAAC,GAAGO,aAAa,CAACP,QAAQ,EAAEG,KAAK,CAACH,QAAQ,CAAC,EAAEI,OAAO,CAAC;EAC3E;EACA,OAAOC,SAAS;AACpB;AAEA,OAAO,SAASE,aAAaA,CAACP,QAAQ,EAAEQ,SAAS,EAAEJ,OAAO,EAAE;EACxD,IAAIJ,QAAQ,IAAIH,cAAc,IAAIJ,eAAe,CAACe,SAAS,CAAC,EAAE;IAC1D,IAAIC,aAAa,GAAGf,iBAAiB,CAACc,SAAS,EAAEJ,OAAO,CAAC;IACzD,IAAIJ,QAAQ,IAAIC,uBAAuB,EAAE;MACrCQ,aAAa,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEF,aAAa,CAAC;IAC9C;IACA,OAAOA,aAAa;EACxB;EACA,OAAOD,SAAS;AACpB"},"metadata":{},"sourceType":"module","externalDependencies":[]}