{"ast":null,"code":"import * as mvc from '../mvc/index.mjs';\nexport const ToolView = mvc.View.extend({\n  name: null,\n  tagName: 'g',\n  className: 'tool',\n  svgElement: true,\n  _visible: true,\n  init: function () {\n    var name = this.name;\n    if (name) this.vel.attr('data-tool-name', name);\n  },\n  configure: function (view, toolsView) {\n    this.relatedView = view;\n    this.paper = view.paper;\n    this.parentView = toolsView;\n    this.simulateRelatedView(this.el);\n    // Delegate events in case the ToolView was removed from the DOM and reused.\n    this.delegateEvents();\n    return this;\n  },\n  simulateRelatedView: function (el) {\n    if (el) el.setAttribute('model-id', this.relatedView.model.id);\n  },\n  getName: function () {\n    return this.name;\n  },\n  show: function () {\n    this.el.style.display = '';\n    this._visible = true;\n  },\n  hide: function () {\n    this.el.style.display = 'none';\n    this._visible = false;\n  },\n  isVisible: function () {\n    return !!this._visible;\n  },\n  focus: function () {\n    var opacity = this.options.focusOpacity;\n    if (isFinite(opacity)) this.el.style.opacity = opacity;\n    this.parentView.focusTool(this);\n  },\n  blur: function () {\n    this.el.style.opacity = '';\n    this.parentView.blurTool(this);\n  },\n  update: function () {\n    // to be overridden\n  },\n  guard: function (evt) {\n    // Let the context-menu event bubble up to the relatedView\n    const {\n      paper,\n      relatedView\n    } = this;\n    if (!paper || !relatedView) return true;\n    return paper.guard(evt, relatedView);\n  }\n});","map":{"version":3,"names":["mvc","ToolView","View","extend","name","tagName","className","svgElement","_visible","init","vel","attr","configure","view","toolsView","relatedView","paper","parentView","simulateRelatedView","el","delegateEvents","setAttribute","model","id","getName","show","style","display","hide","isVisible","focus","opacity","options","focusOpacity","isFinite","focusTool","blur","blurTool","update","guard","evt"],"sources":["/Users/guankaiyuan/ReactTs/node_modules/.pnpm/@joint+core@4.0.1/node_modules/@joint/core/src/dia/ToolView.mjs"],"sourcesContent":["import * as mvc from '../mvc/index.mjs';\n\nexport const ToolView = mvc.View.extend({\n    name: null,\n    tagName: 'g',\n    className: 'tool',\n    svgElement: true,\n    _visible: true,\n\n    init: function() {\n        var name = this.name;\n        if (name) this.vel.attr('data-tool-name', name);\n    },\n\n    configure: function(view, toolsView) {\n        this.relatedView = view;\n        this.paper = view.paper;\n        this.parentView = toolsView;\n        this.simulateRelatedView(this.el);\n        // Delegate events in case the ToolView was removed from the DOM and reused.\n        this.delegateEvents();\n        return this;\n    },\n\n    simulateRelatedView: function(el) {\n        if (el) el.setAttribute('model-id', this.relatedView.model.id);\n    },\n\n    getName: function() {\n        return this.name;\n    },\n\n    show: function() {\n        this.el.style.display = '';\n        this._visible = true;\n    },\n\n    hide: function() {\n        this.el.style.display = 'none';\n        this._visible = false;\n    },\n\n    isVisible: function() {\n        return !!this._visible;\n    },\n\n    focus: function() {\n        var opacity = this.options.focusOpacity;\n        if (isFinite(opacity)) this.el.style.opacity = opacity;\n        this.parentView.focusTool(this);\n    },\n\n    blur: function() {\n        this.el.style.opacity = '';\n        this.parentView.blurTool(this);\n    },\n\n    update: function() {\n        // to be overridden\n    },\n\n    guard: function(evt) {\n        // Let the context-menu event bubble up to the relatedView\n        const { paper, relatedView } = this;\n        if (!paper || !relatedView) return true;\n        return paper.guard(evt, relatedView);\n    }\n});\n\n"],"mappings":"AAAA,OAAO,KAAKA,GAAG,MAAM,kBAAkB;AAEvC,OAAO,MAAMC,QAAQ,GAAGD,GAAG,CAACE,IAAI,CAACC,MAAM,CAAC;EACpCC,IAAI,EAAE,IAAI;EACVC,OAAO,EAAE,GAAG;EACZC,SAAS,EAAE,MAAM;EACjBC,UAAU,EAAE,IAAI;EAChBC,QAAQ,EAAE,IAAI;EAEdC,IAAI,EAAE,SAAAA,CAAA,EAAW;IACb,IAAIL,IAAI,GAAG,IAAI,CAACA,IAAI;IACpB,IAAIA,IAAI,EAAE,IAAI,CAACM,GAAG,CAACC,IAAI,CAAC,gBAAgB,EAAEP,IAAI,CAAC;EACnD,CAAC;EAEDQ,SAAS,EAAE,SAAAA,CAASC,IAAI,EAAEC,SAAS,EAAE;IACjC,IAAI,CAACC,WAAW,GAAGF,IAAI;IACvB,IAAI,CAACG,KAAK,GAAGH,IAAI,CAACG,KAAK;IACvB,IAAI,CAACC,UAAU,GAAGH,SAAS;IAC3B,IAAI,CAACI,mBAAmB,CAAC,IAAI,CAACC,EAAE,CAAC;IACjC;IACA,IAAI,CAACC,cAAc,CAAC,CAAC;IACrB,OAAO,IAAI;EACf,CAAC;EAEDF,mBAAmB,EAAE,SAAAA,CAASC,EAAE,EAAE;IAC9B,IAAIA,EAAE,EAAEA,EAAE,CAACE,YAAY,CAAC,UAAU,EAAE,IAAI,CAACN,WAAW,CAACO,KAAK,CAACC,EAAE,CAAC;EAClE,CAAC;EAEDC,OAAO,EAAE,SAAAA,CAAA,EAAW;IAChB,OAAO,IAAI,CAACpB,IAAI;EACpB,CAAC;EAEDqB,IAAI,EAAE,SAAAA,CAAA,EAAW;IACb,IAAI,CAACN,EAAE,CAACO,KAAK,CAACC,OAAO,GAAG,EAAE;IAC1B,IAAI,CAACnB,QAAQ,GAAG,IAAI;EACxB,CAAC;EAEDoB,IAAI,EAAE,SAAAA,CAAA,EAAW;IACb,IAAI,CAACT,EAAE,CAACO,KAAK,CAACC,OAAO,GAAG,MAAM;IAC9B,IAAI,CAACnB,QAAQ,GAAG,KAAK;EACzB,CAAC;EAEDqB,SAAS,EAAE,SAAAA,CAAA,EAAW;IAClB,OAAO,CAAC,CAAC,IAAI,CAACrB,QAAQ;EAC1B,CAAC;EAEDsB,KAAK,EAAE,SAAAA,CAAA,EAAW;IACd,IAAIC,OAAO,GAAG,IAAI,CAACC,OAAO,CAACC,YAAY;IACvC,IAAIC,QAAQ,CAACH,OAAO,CAAC,EAAE,IAAI,CAACZ,EAAE,CAACO,KAAK,CAACK,OAAO,GAAGA,OAAO;IACtD,IAAI,CAACd,UAAU,CAACkB,SAAS,CAAC,IAAI,CAAC;EACnC,CAAC;EAEDC,IAAI,EAAE,SAAAA,CAAA,EAAW;IACb,IAAI,CAACjB,EAAE,CAACO,KAAK,CAACK,OAAO,GAAG,EAAE;IAC1B,IAAI,CAACd,UAAU,CAACoB,QAAQ,CAAC,IAAI,CAAC;EAClC,CAAC;EAEDC,MAAM,EAAE,SAAAA,CAAA,EAAW;IACf;EAAA,CACH;EAEDC,KAAK,EAAE,SAAAA,CAASC,GAAG,EAAE;IACjB;IACA,MAAM;MAAExB,KAAK;MAAED;IAAY,CAAC,GAAG,IAAI;IACnC,IAAI,CAACC,KAAK,IAAI,CAACD,WAAW,EAAE,OAAO,IAAI;IACvC,OAAOC,KAAK,CAACuB,KAAK,CAACC,GAAG,EAAEzB,WAAW,CAAC;EACxC;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}