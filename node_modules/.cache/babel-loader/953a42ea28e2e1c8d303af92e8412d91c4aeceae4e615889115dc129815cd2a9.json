{"ast":null,"code":"import * as connectionStrategies from '../connectionStrategies/index.mjs';\nexport function getViewBBox(view, useModelGeometry) {\n  const {\n    model\n  } = view;\n  if (useModelGeometry) return model.getBBox();\n  return model.isLink() ? view.getConnection().bbox() : view.getNodeUnrotatedBBox(view.el);\n}\nexport function getAnchor(coords, view, magnet) {\n  // take advantage of an existing logic inside of the\n  // pin relative connection strategy\n  var end = connectionStrategies.pinRelative.call(this.paper, {}, view, magnet, coords, this.model);\n  return end.anchor;\n}\nexport function snapAnchor(coords, view, magnet, type, relatedView, toolView) {\n  var snapRadius = toolView.options.snapRadius;\n  var isSource = type === 'source';\n  var refIndex = isSource ? 0 : -1;\n  var ref = this.model.vertex(refIndex) || this.getEndAnchor(isSource ? 'target' : 'source');\n  if (ref) {\n    if (Math.abs(ref.x - coords.x) < snapRadius) coords.x = ref.x;\n    if (Math.abs(ref.y - coords.y) < snapRadius) coords.y = ref.y;\n  }\n  return coords;\n}","map":{"version":3,"names":["connectionStrategies","getViewBBox","view","useModelGeometry","model","getBBox","isLink","getConnection","bbox","getNodeUnrotatedBBox","el","getAnchor","coords","magnet","end","pinRelative","call","paper","anchor","snapAnchor","type","relatedView","toolView","snapRadius","options","isSource","refIndex","ref","vertex","getEndAnchor","Math","abs","x","y"],"sources":["/Users/guankaiyuan/ReactTs/node_modules/.pnpm/@joint+core@4.0.1/node_modules/@joint/core/src/linkTools/helpers.mjs"],"sourcesContent":["import * as connectionStrategies from '../connectionStrategies/index.mjs';\n\nexport function getViewBBox(view, useModelGeometry) {\n    const { model } = view;\n    if (useModelGeometry) return model.getBBox();\n    return (model.isLink()) ? view.getConnection().bbox() : view.getNodeUnrotatedBBox(view.el);\n}\n\nexport function getAnchor(coords, view, magnet) {\n    // take advantage of an existing logic inside of the\n    // pin relative connection strategy\n    var end = connectionStrategies.pinRelative.call(\n        this.paper,\n        {},\n        view,\n        magnet,\n        coords,\n        this.model\n    );\n    return end.anchor;\n}\n\nexport function snapAnchor(coords, view, magnet, type, relatedView, toolView) {\n    var snapRadius = toolView.options.snapRadius;\n    var isSource = (type === 'source');\n    var refIndex = (isSource ? 0 : -1);\n    var ref = this.model.vertex(refIndex) || this.getEndAnchor(isSource ? 'target' : 'source');\n    if (ref) {\n        if (Math.abs(ref.x - coords.x) < snapRadius) coords.x = ref.x;\n        if (Math.abs(ref.y - coords.y) < snapRadius) coords.y = ref.y;\n    }\n    return coords;\n}\n"],"mappings":"AAAA,OAAO,KAAKA,oBAAoB,MAAM,mCAAmC;AAEzE,OAAO,SAASC,WAAWA,CAACC,IAAI,EAAEC,gBAAgB,EAAE;EAChD,MAAM;IAAEC;EAAM,CAAC,GAAGF,IAAI;EACtB,IAAIC,gBAAgB,EAAE,OAAOC,KAAK,CAACC,OAAO,CAAC,CAAC;EAC5C,OAAQD,KAAK,CAACE,MAAM,CAAC,CAAC,GAAIJ,IAAI,CAACK,aAAa,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,GAAGN,IAAI,CAACO,oBAAoB,CAACP,IAAI,CAACQ,EAAE,CAAC;AAC9F;AAEA,OAAO,SAASC,SAASA,CAACC,MAAM,EAAEV,IAAI,EAAEW,MAAM,EAAE;EAC5C;EACA;EACA,IAAIC,GAAG,GAAGd,oBAAoB,CAACe,WAAW,CAACC,IAAI,CAC3C,IAAI,CAACC,KAAK,EACV,CAAC,CAAC,EACFf,IAAI,EACJW,MAAM,EACND,MAAM,EACN,IAAI,CAACR,KACT,CAAC;EACD,OAAOU,GAAG,CAACI,MAAM;AACrB;AAEA,OAAO,SAASC,UAAUA,CAACP,MAAM,EAAEV,IAAI,EAAEW,MAAM,EAAEO,IAAI,EAAEC,WAAW,EAAEC,QAAQ,EAAE;EAC1E,IAAIC,UAAU,GAAGD,QAAQ,CAACE,OAAO,CAACD,UAAU;EAC5C,IAAIE,QAAQ,GAAIL,IAAI,KAAK,QAAS;EAClC,IAAIM,QAAQ,GAAID,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAE;EAClC,IAAIE,GAAG,GAAG,IAAI,CAACvB,KAAK,CAACwB,MAAM,CAACF,QAAQ,CAAC,IAAI,IAAI,CAACG,YAAY,CAACJ,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC;EAC1F,IAAIE,GAAG,EAAE;IACL,IAAIG,IAAI,CAACC,GAAG,CAACJ,GAAG,CAACK,CAAC,GAAGpB,MAAM,CAACoB,CAAC,CAAC,GAAGT,UAAU,EAAEX,MAAM,CAACoB,CAAC,GAAGL,GAAG,CAACK,CAAC;IAC7D,IAAIF,IAAI,CAACC,GAAG,CAACJ,GAAG,CAACM,CAAC,GAAGrB,MAAM,CAACqB,CAAC,CAAC,GAAGV,UAAU,EAAEX,MAAM,CAACqB,CAAC,GAAGN,GAAG,CAACM,CAAC;EACjE;EACA,OAAOrB,MAAM;AACjB"},"metadata":{},"sourceType":"module","externalDependencies":[]}