{"ast":null,"code":"// Offset attributes require the cell view to be rendered before they can be applied\n// (they must be appended to the DOM).\n\nimport { Point } from '../../g/index.mjs';\nimport { isPercentage } from '../../util/util.mjs';\nfunction offsetWrapper(axis, dimension, corner) {\n  return function (value, nodeBBox) {\n    var delta;\n    if (value === 'middle') {\n      delta = nodeBBox[dimension] / 2;\n    } else if (value === corner) {\n      delta = nodeBBox[dimension];\n    } else if (isFinite(value)) {\n      // TODO: or not to do a breaking change?\n      delta = value > -1 && value < 1 ? -nodeBBox[dimension] * value : -value;\n    } else if (isPercentage(value)) {\n      delta = nodeBBox[dimension] * parseFloat(value) / 100;\n    } else {\n      delta = 0;\n    }\n    var point = new Point();\n    point[axis] = -(nodeBBox[axis] + delta);\n    return point;\n  };\n}\nconst offsetAttributesNS = {\n  // `x-alignment` when set to `middle` causes centering of the sub-element around its new x coordinate.\n  // `x-alignment` when set to `right` uses the x coordinate as referenced to the right of the bbox.\n  'x-alignment': {\n    offset: offsetWrapper('x', 'width', 'right')\n  },\n  // `y-alignment` when set to `middle` causes centering of the sub-element around its new y coordinate.\n  // `y-alignment` when set to `bottom` uses the y coordinate as referenced to the bottom of the bbox.\n  'y-alignment': {\n    offset: offsetWrapper('y', 'height', 'bottom')\n  },\n  'reset-offset': {\n    offset: function (val, nodeBBox) {\n      return val ? {\n        x: -nodeBBox.x,\n        y: -nodeBBox.y\n      } : {\n        x: 0,\n        y: 0\n      };\n    }\n  }\n};\nexport default offsetAttributesNS;","map":{"version":3,"names":["Point","isPercentage","offsetWrapper","axis","dimension","corner","value","nodeBBox","delta","isFinite","parseFloat","point","offsetAttributesNS","offset","val","x","y"],"sources":["/Users/guankaiyuan/ReactTs/node_modules/.pnpm/@joint+core@4.0.1/node_modules/@joint/core/src/dia/attributes/offset.mjs"],"sourcesContent":["\n// Offset attributes require the cell view to be rendered before they can be applied\n// (they must be appended to the DOM).\n\nimport { Point } from '../../g/index.mjs';\nimport { isPercentage } from '../../util/util.mjs';\n\nfunction offsetWrapper(axis, dimension, corner) {\n    return function(value, nodeBBox) {\n        var delta;\n        if (value === 'middle') {\n            delta = nodeBBox[dimension] / 2;\n        } else if (value === corner) {\n            delta = nodeBBox[dimension];\n        } else if (isFinite(value)) {\n            // TODO: or not to do a breaking change?\n            delta = (value > -1 && value < 1) ? (-nodeBBox[dimension] * value) : -value;\n        } else if (isPercentage(value)) {\n            delta = nodeBBox[dimension] * parseFloat(value) / 100;\n        } else {\n            delta = 0;\n        }\n\n        var point = new Point();\n        point[axis] = -(nodeBBox[axis] + delta);\n        return point;\n    };\n}\n\nconst offsetAttributesNS = {\n\n    // `x-alignment` when set to `middle` causes centering of the sub-element around its new x coordinate.\n    // `x-alignment` when set to `right` uses the x coordinate as referenced to the right of the bbox.\n    'x-alignment': {\n        offset: offsetWrapper('x', 'width', 'right')\n    },\n\n    // `y-alignment` when set to `middle` causes centering of the sub-element around its new y coordinate.\n    // `y-alignment` when set to `bottom` uses the y coordinate as referenced to the bottom of the bbox.\n    'y-alignment': {\n        offset: offsetWrapper('y', 'height', 'bottom')\n    },\n\n    'reset-offset': {\n        offset: function(val, nodeBBox) {\n            return (val)\n                ? { x: -nodeBBox.x, y: -nodeBBox.y }\n                : { x: 0, y: 0 };\n        }\n    },\n};\n\nexport default offsetAttributesNS;\n"],"mappings":"AACA;AACA;;AAEA,SAASA,KAAK,QAAQ,mBAAmB;AACzC,SAASC,YAAY,QAAQ,qBAAqB;AAElD,SAASC,aAAaA,CAACC,IAAI,EAAEC,SAAS,EAAEC,MAAM,EAAE;EAC5C,OAAO,UAASC,KAAK,EAAEC,QAAQ,EAAE;IAC7B,IAAIC,KAAK;IACT,IAAIF,KAAK,KAAK,QAAQ,EAAE;MACpBE,KAAK,GAAGD,QAAQ,CAACH,SAAS,CAAC,GAAG,CAAC;IACnC,CAAC,MAAM,IAAIE,KAAK,KAAKD,MAAM,EAAE;MACzBG,KAAK,GAAGD,QAAQ,CAACH,SAAS,CAAC;IAC/B,CAAC,MAAM,IAAIK,QAAQ,CAACH,KAAK,CAAC,EAAE;MACxB;MACAE,KAAK,GAAIF,KAAK,GAAG,CAAC,CAAC,IAAIA,KAAK,GAAG,CAAC,GAAK,CAACC,QAAQ,CAACH,SAAS,CAAC,GAAGE,KAAK,GAAI,CAACA,KAAK;IAC/E,CAAC,MAAM,IAAIL,YAAY,CAACK,KAAK,CAAC,EAAE;MAC5BE,KAAK,GAAGD,QAAQ,CAACH,SAAS,CAAC,GAAGM,UAAU,CAACJ,KAAK,CAAC,GAAG,GAAG;IACzD,CAAC,MAAM;MACHE,KAAK,GAAG,CAAC;IACb;IAEA,IAAIG,KAAK,GAAG,IAAIX,KAAK,CAAC,CAAC;IACvBW,KAAK,CAACR,IAAI,CAAC,GAAG,EAAEI,QAAQ,CAACJ,IAAI,CAAC,GAAGK,KAAK,CAAC;IACvC,OAAOG,KAAK;EAChB,CAAC;AACL;AAEA,MAAMC,kBAAkB,GAAG;EAEvB;EACA;EACA,aAAa,EAAE;IACXC,MAAM,EAAEX,aAAa,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO;EAC/C,CAAC;EAED;EACA;EACA,aAAa,EAAE;IACXW,MAAM,EAAEX,aAAa,CAAC,GAAG,EAAE,QAAQ,EAAE,QAAQ;EACjD,CAAC;EAED,cAAc,EAAE;IACZW,MAAM,EAAE,SAAAA,CAASC,GAAG,EAAEP,QAAQ,EAAE;MAC5B,OAAQO,GAAG,GACL;QAAEC,CAAC,EAAE,CAACR,QAAQ,CAACQ,CAAC;QAAEC,CAAC,EAAE,CAACT,QAAQ,CAACS;MAAE,CAAC,GAClC;QAAED,CAAC,EAAE,CAAC;QAAEC,CAAC,EAAE;MAAE,CAAC;IACxB;EACJ;AACJ,CAAC;AAED,eAAeJ,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}