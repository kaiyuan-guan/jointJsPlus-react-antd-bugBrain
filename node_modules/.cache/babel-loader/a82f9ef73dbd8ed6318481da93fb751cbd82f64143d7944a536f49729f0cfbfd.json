{"ast":null,"code":"/*! JointJS+ v4.0.0 - HTML5 Diagramming Framework - TRIAL VERSION\n\nCopyright (c) 2024 client IO\n\n 2024-02-18 \n\n\nThis Source Code Form is subject to the terms of the JointJS+ Trial License\n, v. 2.0. If a copy of the JointJS+ License was not distributed with this\nfile, You can obtain one at https://www.jointjs.com/license\n or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/\n\nimport { Subscription } from 'rxjs';\nimport { createPlugins } from '../joint-plus/plugins';\nimport { JointPlusController, KeyboardController } from '../joint-plus/controllers';\nexport class JointPlusService {\n  constructor(scopeElement, paperElement, stencilElement, toolbarElement, eventBusService) {\n    this.scopeElement = scopeElement;\n    this.eventBusService = eventBusService;\n    this.controllers = void 0;\n    this.graph = void 0;\n    this.history = void 0;\n    this.keyboard = void 0;\n    this.paper = void 0;\n    this.selection = [];\n    this.scroller = void 0;\n    this.stencil = void 0;\n    this.toolbar = void 0;\n    this.tooltip = void 0;\n    this.subscriptions = new Subscription();\n    Object.assign(this, createPlugins(scopeElement, paperElement, stencilElement, toolbarElement));\n    this.controllers = {\n      joint: new JointPlusController(this),\n      keyboard: new KeyboardController(this)\n    };\n    this.subscriptions.add(\n    // Translate RxJx notifications to Backbone Events\n    eventBusService.events().subscribe(({\n      name,\n      value\n    }) => eventBusService.trigger(name, value)));\n  }\n  destroy() {\n    const {\n      paper,\n      scroller,\n      stencil,\n      toolbar,\n      tooltip,\n      controllers,\n      subscriptions\n    } = this;\n    paper.remove();\n    scroller.remove();\n    stencil.remove();\n    toolbar.remove();\n    tooltip.remove();\n    Object.keys(controllers).forEach(name => controllers[name].stopListening());\n    subscriptions.unsubscribe();\n  }\n}\nexport default JointPlusService;","map":{"version":3,"names":["Subscription","createPlugins","JointPlusController","KeyboardController","JointPlusService","constructor","scopeElement","paperElement","stencilElement","toolbarElement","eventBusService","controllers","graph","history","keyboard","paper","selection","scroller","stencil","toolbar","tooltip","subscriptions","Object","assign","joint","add","events","subscribe","name","value","trigger","destroy","remove","keys","forEach","stopListening","unsubscribe"],"sources":["/Users/guankaiyuan/ReactTs/src/services/joint-plus.service.ts"],"sourcesContent":["/*! JointJS+ v4.0.0 - HTML5 Diagramming Framework - TRIAL VERSION\n\nCopyright (c) 2024 client IO\n\n 2024-02-18 \n\n\nThis Source Code Form is subject to the terms of the JointJS+ Trial License\n, v. 2.0. If a copy of the JointJS+ License was not distributed with this\nfile, You can obtain one at https://www.jointjs.com/license\n or from the JointJS+ archive as was distributed by client IO. See the LICENSE file.*/\n\n\nimport { Subscription } from 'rxjs';\nimport { dia, ui } from '@joint/plus';\n\nimport { EventBusService } from './event-bus.service';\nimport { Controller } from '../joint-plus/controller';\nimport { createPlugins } from '../joint-plus/plugins';\nimport { JointPlusController, KeyboardController } from '../joint-plus/controllers';\n\nexport class JointPlusService {\n\n    public controllers: { joint: Controller, keyboard: Controller };\n    public graph: dia.Graph;\n    public history: dia.CommandManager;\n    public keyboard: ui.Keyboard;\n    public paper: dia.Paper;\n    public selection: dia.Cell[] = [];\n    public scroller: ui.PaperScroller;\n    public stencil: ui.Stencil;\n    public toolbar: ui.Toolbar;\n    public tooltip: ui.Tooltip;\n\n    private subscriptions = new Subscription();\n\n    constructor(\n        private scopeElement: Element,\n        paperElement: Element,\n        stencilElement: Element,\n        toolbarElement: Element,\n        public readonly eventBusService: EventBusService,\n    ) {\n        Object.assign(this, createPlugins(scopeElement, paperElement, stencilElement, toolbarElement));\n        this.controllers = {\n            joint: new JointPlusController(this),\n            keyboard: new KeyboardController(this)\n        };\n        this.subscriptions.add(\n            // Translate RxJx notifications to Backbone Events\n            eventBusService.events().subscribe(({ name, value }) => eventBusService.trigger(name, value))\n        );\n    }\n\n    public destroy(): void {\n        const { paper, scroller, stencil, toolbar, tooltip, controllers, subscriptions } = this;\n        paper.remove();\n        scroller.remove();\n        stencil.remove();\n        toolbar.remove();\n        tooltip.remove();\n        Object.keys(controllers).forEach(name => (controllers as any)[name].stopListening());\n        subscriptions.unsubscribe();\n    }\n}\n\nexport default JointPlusService;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASA,YAAY,QAAQ,MAAM;AAKnC,SAASC,aAAa,QAAQ,uBAAuB;AACrD,SAASC,mBAAmB,EAAEC,kBAAkB,QAAQ,2BAA2B;AAEnF,OAAO,MAAMC,gBAAgB,CAAC;EAe1BC,WAAWA,CACCC,YAAqB,EAC7BC,YAAqB,EACrBC,cAAuB,EACvBC,cAAuB,EACPC,eAAgC,EAClD;IAAA,KALUJ,YAAqB,GAArBA,YAAqB;IAAA,KAIbI,eAAgC,GAAhCA,eAAgC;IAAA,KAlB7CC,WAAW;IAAA,KACXC,KAAK;IAAA,KACLC,OAAO;IAAA,KACPC,QAAQ;IAAA,KACRC,KAAK;IAAA,KACLC,SAAS,GAAe,EAAE;IAAA,KAC1BC,QAAQ;IAAA,KACRC,OAAO;IAAA,KACPC,OAAO;IAAA,KACPC,OAAO;IAAA,KAENC,aAAa,GAAG,IAAIrB,YAAY,CAAC,CAAC;IAStCsB,MAAM,CAACC,MAAM,CAAC,IAAI,EAAEtB,aAAa,CAACK,YAAY,EAAEC,YAAY,EAAEC,cAAc,EAAEC,cAAc,CAAC,CAAC;IAC9F,IAAI,CAACE,WAAW,GAAG;MACfa,KAAK,EAAE,IAAItB,mBAAmB,CAAC,IAAI,CAAC;MACpCY,QAAQ,EAAE,IAAIX,kBAAkB,CAAC,IAAI;IACzC,CAAC;IACD,IAAI,CAACkB,aAAa,CAACI,GAAG;IAClB;IACAf,eAAe,CAACgB,MAAM,CAAC,CAAC,CAACC,SAAS,CAAC,CAAC;MAAEC,IAAI;MAAEC;IAAM,CAAC,KAAKnB,eAAe,CAACoB,OAAO,CAACF,IAAI,EAAEC,KAAK,CAAC,CAChG,CAAC;EACL;EAEOE,OAAOA,CAAA,EAAS;IACnB,MAAM;MAAEhB,KAAK;MAAEE,QAAQ;MAAEC,OAAO;MAAEC,OAAO;MAAEC,OAAO;MAAET,WAAW;MAAEU;IAAc,CAAC,GAAG,IAAI;IACvFN,KAAK,CAACiB,MAAM,CAAC,CAAC;IACdf,QAAQ,CAACe,MAAM,CAAC,CAAC;IACjBd,OAAO,CAACc,MAAM,CAAC,CAAC;IAChBb,OAAO,CAACa,MAAM,CAAC,CAAC;IAChBZ,OAAO,CAACY,MAAM,CAAC,CAAC;IAChBV,MAAM,CAACW,IAAI,CAACtB,WAAW,CAAC,CAACuB,OAAO,CAACN,IAAI,IAAKjB,WAAW,CAASiB,IAAI,CAAC,CAACO,aAAa,CAAC,CAAC,CAAC;IACpFd,aAAa,CAACe,WAAW,CAAC,CAAC;EAC/B;AACJ;AAEA,eAAehC,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}