{"ast":null,"code":"import V from '../V/index.mjs';\nimport { Events } from './Events.mjs';\nexport class Listener {\n  constructor(...callbackArguments) {\n    this.callbackArguments = callbackArguments;\n  }\n  listenTo(object, evt, ...args) {\n    const {\n      callbackArguments\n    } = this;\n    // signature 1 - (object, eventHashMap, context)\n    if (V.isObject(evt)) {\n      const [context = null] = args;\n      Object.entries(evt).forEach(([eventName, cb]) => {\n        if (typeof cb !== 'function') return;\n        // Invoke the callback with callbackArguments passed first\n        if (context || callbackArguments.length > 0) cb = cb.bind(context, ...callbackArguments);\n        Events.listenTo.call(this, object, eventName, cb);\n      });\n    }\n    // signature 2 - (object, event, callback, context)\n    else if (typeof evt === 'string' && typeof args[0] === 'function') {\n      let [cb, context = null] = args;\n      // Invoke the callback with callbackArguments passed first\n      if (context || callbackArguments.length > 0) cb = cb.bind(context, ...callbackArguments);\n      Events.listenTo.call(this, object, evt, cb);\n    }\n  }\n  stopListening() {\n    Events.stopListening.call(this);\n  }\n}","map":{"version":3,"names":["V","Events","Listener","constructor","callbackArguments","listenTo","object","evt","args","isObject","context","Object","entries","forEach","eventName","cb","length","bind","call","stopListening"],"sources":["/Users/guankaiyuan/ReactTs/node_modules/.pnpm/@joint+core@4.0.1/node_modules/@joint/core/src/mvc/Listener.mjs"],"sourcesContent":["import V from '../V/index.mjs';\nimport { Events } from './Events.mjs';\n\nexport class Listener {\n    constructor(...callbackArguments) {\n        this.callbackArguments = callbackArguments;\n    }\n\n    listenTo(object, evt, ...args) {\n        const { callbackArguments } = this;\n        // signature 1 - (object, eventHashMap, context)\n        if (V.isObject(evt)) {\n            const [context = null] = args;\n            Object.entries(evt).forEach(([eventName, cb]) => {\n                if (typeof cb !== 'function') return;\n                // Invoke the callback with callbackArguments passed first\n                if (context || callbackArguments.length > 0) cb = cb.bind(context, ...callbackArguments);\n                Events.listenTo.call(this, object, eventName, cb);\n            });\n        }\n        // signature 2 - (object, event, callback, context)\n        else if (typeof evt === 'string' && typeof args[0] === 'function') {\n            let [cb, context = null] = args;\n            // Invoke the callback with callbackArguments passed first\n            if (context || callbackArguments.length > 0) cb = cb.bind(context, ...callbackArguments);\n            Events.listenTo.call(this, object, evt, cb);\n        }\n    }\n\n    stopListening() {\n        Events.stopListening.call(this);\n    }\n}\n"],"mappings":"AAAA,OAAOA,CAAC,MAAM,gBAAgB;AAC9B,SAASC,MAAM,QAAQ,cAAc;AAErC,OAAO,MAAMC,QAAQ,CAAC;EAClBC,WAAWA,CAAC,GAAGC,iBAAiB,EAAE;IAC9B,IAAI,CAACA,iBAAiB,GAAGA,iBAAiB;EAC9C;EAEAC,QAAQA,CAACC,MAAM,EAAEC,GAAG,EAAE,GAAGC,IAAI,EAAE;IAC3B,MAAM;MAAEJ;IAAkB,CAAC,GAAG,IAAI;IAClC;IACA,IAAIJ,CAAC,CAACS,QAAQ,CAACF,GAAG,CAAC,EAAE;MACjB,MAAM,CAACG,OAAO,GAAG,IAAI,CAAC,GAAGF,IAAI;MAC7BG,MAAM,CAACC,OAAO,CAACL,GAAG,CAAC,CAACM,OAAO,CAAC,CAAC,CAACC,SAAS,EAAEC,EAAE,CAAC,KAAK;QAC7C,IAAI,OAAOA,EAAE,KAAK,UAAU,EAAE;QAC9B;QACA,IAAIL,OAAO,IAAIN,iBAAiB,CAACY,MAAM,GAAG,CAAC,EAAED,EAAE,GAAGA,EAAE,CAACE,IAAI,CAACP,OAAO,EAAE,GAAGN,iBAAiB,CAAC;QACxFH,MAAM,CAACI,QAAQ,CAACa,IAAI,CAAC,IAAI,EAAEZ,MAAM,EAAEQ,SAAS,EAAEC,EAAE,CAAC;MACrD,CAAC,CAAC;IACN;IACA;IAAA,KACK,IAAI,OAAOR,GAAG,KAAK,QAAQ,IAAI,OAAOC,IAAI,CAAC,CAAC,CAAC,KAAK,UAAU,EAAE;MAC/D,IAAI,CAACO,EAAE,EAAEL,OAAO,GAAG,IAAI,CAAC,GAAGF,IAAI;MAC/B;MACA,IAAIE,OAAO,IAAIN,iBAAiB,CAACY,MAAM,GAAG,CAAC,EAAED,EAAE,GAAGA,EAAE,CAACE,IAAI,CAACP,OAAO,EAAE,GAAGN,iBAAiB,CAAC;MACxFH,MAAM,CAACI,QAAQ,CAACa,IAAI,CAAC,IAAI,EAAEZ,MAAM,EAAEC,GAAG,EAAEQ,EAAE,CAAC;IAC/C;EACJ;EAEAI,aAAaA,CAAA,EAAG;IACZlB,MAAM,CAACkB,aAAa,CAACD,IAAI,CAAC,IAAI,CAAC;EACnC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}