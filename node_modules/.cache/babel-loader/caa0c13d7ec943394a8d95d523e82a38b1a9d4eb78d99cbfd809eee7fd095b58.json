{"ast":null,"code":"import { HoverConnect as LinkHoverConnect } from '../linkTools/HoverConnect.mjs';\nimport V from '../V/index.mjs';\nimport * as g from '../g/index.mjs';\nimport { getViewBBox } from '../linkTools/helpers.mjs';\nimport { isCalcAttribute, evalCalcAttribute } from '../dia/attributes/calc.mjs';\nexport const HoverConnect = LinkHoverConnect.extend({\n  getTrackPath() {\n    const {\n      relatedView: view,\n      options\n    } = this;\n    let {\n      useModelGeometry,\n      trackPath = 'M 0 0 H calc(w) V calc(h) H 0 Z'\n    } = options;\n    if (typeof trackPath === 'function') {\n      trackPath = trackPath.call(this, view);\n    }\n    if (isCalcAttribute(trackPath)) {\n      const bbox = getViewBBox(view, useModelGeometry);\n      trackPath = evalCalcAttribute(trackPath, bbox);\n    }\n    return new g.Path(V.normalizePathData(trackPath));\n  },\n  getTrackMatrix() {\n    const {\n      relatedView: view,\n      options\n    } = this;\n    let {\n      useModelGeometry,\n      rotate\n    } = options;\n    let bbox = getViewBBox(view, useModelGeometry);\n    const angle = view.model.angle();\n    if (!rotate) bbox = bbox.bbox(angle);\n    let matrix = V.createSVGMatrix().translate(bbox.x + bbox.width / 2, bbox.y + bbox.height / 2);\n    if (rotate) matrix = matrix.rotate(angle);\n    matrix = matrix.translate(-bbox.width / 2, -bbox.height / 2);\n    return matrix;\n  }\n});","map":{"version":3,"names":["HoverConnect","LinkHoverConnect","V","g","getViewBBox","isCalcAttribute","evalCalcAttribute","extend","getTrackPath","relatedView","view","options","useModelGeometry","trackPath","call","bbox","Path","normalizePathData","getTrackMatrix","rotate","angle","model","matrix","createSVGMatrix","translate","x","width","y","height"],"sources":["/Users/guankaiyuan/ReactTs/node_modules/.pnpm/@joint+core@4.0.1/node_modules/@joint/core/src/elementTools/HoverConnect.mjs"],"sourcesContent":["import { HoverConnect as LinkHoverConnect } from '../linkTools/HoverConnect.mjs';\nimport V from '../V/index.mjs';\nimport * as g from '../g/index.mjs';\nimport { getViewBBox } from '../linkTools/helpers.mjs';\nimport { isCalcAttribute, evalCalcAttribute } from '../dia/attributes/calc.mjs';\n\nexport const HoverConnect = LinkHoverConnect.extend({\n\n    getTrackPath() {\n        const { relatedView: view, options } = this;\n        let {\n            useModelGeometry,\n            trackPath =  'M 0 0 H calc(w) V calc(h) H 0 Z'\n        } = options;\n        if (typeof trackPath === 'function') {\n            trackPath = trackPath.call(this, view);\n        }\n        if (isCalcAttribute(trackPath)) {\n            const bbox = getViewBBox(view, useModelGeometry);\n            trackPath = evalCalcAttribute(trackPath, bbox);\n        }\n        return new g.Path(V.normalizePathData(trackPath));\n    },\n\n    getTrackMatrix() {\n        const { relatedView: view, options } = this;\n        let { useModelGeometry, rotate } = options;\n        let bbox = getViewBBox(view, useModelGeometry);\n        const angle = view.model.angle();\n        if (!rotate) bbox = bbox.bbox(angle);\n        let matrix = V.createSVGMatrix().translate(bbox.x + bbox.width / 2, bbox.y + bbox.height / 2);\n        if (rotate) matrix = matrix.rotate(angle);\n        matrix = matrix.translate(- bbox.width / 2, - bbox.height / 2);\n        return matrix;\n    }\n\n});\n"],"mappings":"AAAA,SAASA,YAAY,IAAIC,gBAAgB,QAAQ,+BAA+B;AAChF,OAAOC,CAAC,MAAM,gBAAgB;AAC9B,OAAO,KAAKC,CAAC,MAAM,gBAAgB;AACnC,SAASC,WAAW,QAAQ,0BAA0B;AACtD,SAASC,eAAe,EAAEC,iBAAiB,QAAQ,4BAA4B;AAE/E,OAAO,MAAMN,YAAY,GAAGC,gBAAgB,CAACM,MAAM,CAAC;EAEhDC,YAAYA,CAAA,EAAG;IACX,MAAM;MAAEC,WAAW,EAAEC,IAAI;MAAEC;IAAQ,CAAC,GAAG,IAAI;IAC3C,IAAI;MACAC,gBAAgB;MAChBC,SAAS,GAAI;IACjB,CAAC,GAAGF,OAAO;IACX,IAAI,OAAOE,SAAS,KAAK,UAAU,EAAE;MACjCA,SAAS,GAAGA,SAAS,CAACC,IAAI,CAAC,IAAI,EAAEJ,IAAI,CAAC;IAC1C;IACA,IAAIL,eAAe,CAACQ,SAAS,CAAC,EAAE;MAC5B,MAAME,IAAI,GAAGX,WAAW,CAACM,IAAI,EAAEE,gBAAgB,CAAC;MAChDC,SAAS,GAAGP,iBAAiB,CAACO,SAAS,EAAEE,IAAI,CAAC;IAClD;IACA,OAAO,IAAIZ,CAAC,CAACa,IAAI,CAACd,CAAC,CAACe,iBAAiB,CAACJ,SAAS,CAAC,CAAC;EACrD,CAAC;EAEDK,cAAcA,CAAA,EAAG;IACb,MAAM;MAAET,WAAW,EAAEC,IAAI;MAAEC;IAAQ,CAAC,GAAG,IAAI;IAC3C,IAAI;MAAEC,gBAAgB;MAAEO;IAAO,CAAC,GAAGR,OAAO;IAC1C,IAAII,IAAI,GAAGX,WAAW,CAACM,IAAI,EAAEE,gBAAgB,CAAC;IAC9C,MAAMQ,KAAK,GAAGV,IAAI,CAACW,KAAK,CAACD,KAAK,CAAC,CAAC;IAChC,IAAI,CAACD,MAAM,EAAEJ,IAAI,GAAGA,IAAI,CAACA,IAAI,CAACK,KAAK,CAAC;IACpC,IAAIE,MAAM,GAAGpB,CAAC,CAACqB,eAAe,CAAC,CAAC,CAACC,SAAS,CAACT,IAAI,CAACU,CAAC,GAAGV,IAAI,CAACW,KAAK,GAAG,CAAC,EAAEX,IAAI,CAACY,CAAC,GAAGZ,IAAI,CAACa,MAAM,GAAG,CAAC,CAAC;IAC7F,IAAIT,MAAM,EAAEG,MAAM,GAAGA,MAAM,CAACH,MAAM,CAACC,KAAK,CAAC;IACzCE,MAAM,GAAGA,MAAM,CAACE,SAAS,CAAC,CAAET,IAAI,CAACW,KAAK,GAAG,CAAC,EAAE,CAAEX,IAAI,CAACa,MAAM,GAAG,CAAC,CAAC;IAC9D,OAAON,MAAM;EACjB;AAEJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}