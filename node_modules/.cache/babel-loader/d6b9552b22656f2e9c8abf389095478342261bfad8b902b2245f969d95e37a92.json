{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function exhaust() {\n  return function (source) {\n    return source.lift(new SwitchFirstOperator());\n  };\n}\nvar SwitchFirstOperator = /*@__PURE__*/function () {\n  function SwitchFirstOperator() {}\n  SwitchFirstOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new SwitchFirstSubscriber(subscriber));\n  };\n  return SwitchFirstOperator;\n}();\nvar SwitchFirstSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(SwitchFirstSubscriber, _super);\n  function SwitchFirstSubscriber(destination) {\n    var _this = _super.call(this, destination) || this;\n    _this.hasCompleted = false;\n    _this.hasSubscription = false;\n    return _this;\n  }\n  SwitchFirstSubscriber.prototype._next = function (value) {\n    if (!this.hasSubscription) {\n      this.hasSubscription = true;\n      this.add(subscribeToResult(this, value));\n    }\n  };\n  SwitchFirstSubscriber.prototype._complete = function () {\n    this.hasCompleted = true;\n    if (!this.hasSubscription) {\n      this.destination.complete();\n    }\n  };\n  SwitchFirstSubscriber.prototype.notifyComplete = function (innerSub) {\n    this.remove(innerSub);\n    this.hasSubscription = false;\n    if (this.hasCompleted) {\n      this.destination.complete();\n    }\n  };\n  return SwitchFirstSubscriber;\n}(OuterSubscriber);","map":{"version":3,"names":["tslib_1","OuterSubscriber","subscribeToResult","exhaust","source","lift","SwitchFirstOperator","prototype","call","subscriber","subscribe","SwitchFirstSubscriber","_super","__extends","destination","_this","hasCompleted","_next","value","hasSubscription","add","_complete","complete","notifyComplete","innerSub","remove"],"sources":["/Users/guankaiyuan/ReactTs/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/src/internal/operators/exhaust.ts"],"sourcesContent":["import { Operator } from '../Operator';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { ObservableInput, OperatorFunction, TeardownLogic } from '../types';\n\nexport function exhaust<T>(): OperatorFunction<ObservableInput<T>, T>;\nexport function exhaust<R>(): OperatorFunction<any, R>;\n\n/**\n * Converts a higher-order Observable into a first-order Observable by dropping\n * inner Observables while the previous inner Observable has not yet completed.\n *\n * <span class=\"informal\">Flattens an Observable-of-Observables by dropping the\n * next inner Observables while the current inner is still executing.</span>\n *\n * ![](exhaust.png)\n *\n * `exhaust` subscribes to an Observable that emits Observables, also known as a\n * higher-order Observable. Each time it observes one of these emitted inner\n * Observables, the output Observable begins emitting the items emitted by that\n * inner Observable. So far, it behaves like {@link mergeAll}. However,\n * `exhaust` ignores every new inner Observable if the previous Observable has\n * not yet completed. Once that one completes, it will accept and flatten the\n * next inner Observable and repeat this process.\n *\n * ## Example\n * Run a finite timer for each click, only if there is no currently active timer\n * ```ts\n * import { fromEvent, interval } from 'rxjs';\n * import { exhaust, map, take } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const higherOrder = clicks.pipe(\n *   map((ev) => interval(1000).pipe(take(5))),\n * );\n * const result = higherOrder.pipe(exhaust());\n * result.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link combineAll}\n * @see {@link concatAll}\n * @see {@link switchAll}\n * @see {@link switchMap}\n * @see {@link mergeAll}\n * @see {@link exhaustMap}\n * @see {@link zipAll}\n *\n * @return {Observable} An Observable that takes a source of Observables and propagates the first observable\n * exclusively until it completes before subscribing to the next.\n * @method exhaust\n * @owner Observable\n */\nexport function exhaust<T>(): OperatorFunction<any, T> {\n  return (source: Observable<T>) => source.lift(new SwitchFirstOperator<T>());\n}\n\nclass SwitchFirstOperator<T> implements Operator<T, T> {\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new SwitchFirstSubscriber(subscriber));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass SwitchFirstSubscriber<T> extends OuterSubscriber<T, T> {\n  private hasCompleted: boolean = false;\n  private hasSubscription: boolean = false;\n\n  constructor(destination: Subscriber<T>) {\n    super(destination);\n  }\n\n  protected _next(value: T): void {\n    if (!this.hasSubscription) {\n      this.hasSubscription = true;\n      this.add(subscribeToResult(this, value));\n    }\n  }\n\n  protected _complete(): void {\n    this.hasCompleted = true;\n    if (!this.hasSubscription) {\n      this.destination.complete();\n    }\n  }\n\n  notifyComplete(innerSub: Subscription): void {\n    this.remove(innerSub);\n    this.hasSubscription = false;\n    if (this.hasCompleted) {\n      this.destination.complete();\n    }\n  }\n}\n"],"mappings":";AAIA,OAAO,KAAEA,OAAA,MAAe,OAAQ;AAChC,SAASC,eAAA,QAAmB,oBAAM;AAkDlC,SAAMC,iBAAiB;OACrB,SAAOC,OAACA,CAAA;EACT,iBAAAC,MAAA;IAAA,OAAAA,MAAA,CAAAC,IAAA,KAAAC,mBAAA;EAAA;AAED;IAAAA,mBAAA;EAIA,SAACA,oBAAA,GAHC;qBACgB,CAAAC,SAAU,CAAAC,IAAI,aAAAC,UAAsB,EAAAL,MAAW,EAAE;IAChE,OAAAA,MAAA,CAAAM,SAAA,KAAAC,qBAAA,CAAAF,UAAA;EACH;EAJA,OAICH,mBAAA;AAOD;IAAuCK,qBAAA,0BAAqBC,MAAA;EAI1DZ,OAAA,CAAAa,SAAA,CAAAF,qBAAY,EAAAC,MAA0B;WAAtCD,qBACEA,CAAAG,WAAM;IAJA,IAAAC,KAAA,GAAAH,MAAY,CAAAJ,IAAY,KAAM,EAAAM,WAAA;IAC9BC,KAAA,CAAAC,YAAA,GAAe,KAAY;;IAIlC,OAAAD,KAAA;EAES;uBACE,CAAAR,SAAiB,CAAAU,KAAA,aAAAC,KAAA;QACzB,KAAK,CAAAC,eAAe,EAAG;MACvB,IAAI,CAACA,eAAI,OAAkB;MAC5B,KAAAC,GAAA,CAAAlB,iBAAA,OAAAgB,KAAA;IACF;EAES;uBACS,CAAAX,SAAQ,CAAAc,SAAA;IACzB,IAAI,CAACL,YAAK;QACR,KAAK,CAAAG,eAAY;MAClB,KAAAL,WAAA,CAAAQ,QAAA;IACF;EAED;uBACc,CAAAf,SAAU,CAAAgB,cAAA,aAAAC,QAAA;IACtB,IAAI,CAACC,MAAA,CAAAD,QAAe;IACpB,IAAI,CAAAL,eAAK,GAAc;QACrB,IAAI,CAACH,YAAY;MAClB,KAAAF,WAAA,CAAAQ,QAAA;IACF;EACH;EA7BuC,OAAAX,qBA6BtC"},"metadata":{},"sourceType":"module","externalDependencies":[]}