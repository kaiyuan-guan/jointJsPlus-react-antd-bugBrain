{"ast":null,"code":"import * as mvc from '../mvc/index.mjs';\nimport V from '../V/index.mjs';\nimport { isPlainObject, result } from '../util/util.mjs';\nfunction toArray(obj) {\n  if (!obj) return [];\n  if (Array.isArray(obj)) return obj;\n  return [obj];\n}\nexport const HighlighterView = mvc.View.extend({\n  tagName: 'g',\n  svgElement: true,\n  className: 'highlight',\n  HIGHLIGHT_FLAG: 1,\n  UPDATE_PRIORITY: 3,\n  DETACHABLE: false,\n  UPDATABLE: true,\n  MOUNTABLE: true,\n  cellView: null,\n  nodeSelector: null,\n  node: null,\n  updateRequested: false,\n  postponedUpdate: false,\n  transformGroup: null,\n  detachedTransformGroup: null,\n  requestUpdate(cellView, nodeSelector) {\n    const {\n      paper\n    } = cellView;\n    this.cellView = cellView;\n    this.nodeSelector = nodeSelector;\n    if (paper) {\n      this.updateRequested = true;\n      paper.requestViewUpdate(this, this.HIGHLIGHT_FLAG, this.UPDATE_PRIORITY);\n    }\n  },\n  confirmUpdate() {\n    // The cellView is now rendered/updated since it has a higher update priority.\n    this.updateRequested = false;\n    const {\n      cellView,\n      nodeSelector\n    } = this;\n    if (!cellView.isMounted()) {\n      this.postponedUpdate = true;\n      return 0;\n    }\n    this.update(cellView, nodeSelector);\n    this.mount();\n    this.transform();\n    return 0;\n  },\n  findNode(cellView, nodeSelector = null) {\n    let el;\n    if (typeof nodeSelector === 'string') {\n      el = cellView.findNode(nodeSelector);\n    } else if (isPlainObject(nodeSelector)) {\n      const isLink = cellView.model.isLink();\n      const {\n        label = null,\n        port,\n        selector\n      } = nodeSelector;\n      if (isLink && label !== null) {\n        // Link Label Selector\n        el = cellView.findLabelNode(label, selector);\n      } else if (!isLink && port) {\n        // Element Port Selector\n        el = cellView.findPortNode(port, selector);\n      } else {\n        // Cell Selector\n        el = cellView.findNode(selector);\n      }\n    } else if (nodeSelector) {\n      el = V.toNode(nodeSelector);\n      if (!(el instanceof SVGElement)) el = null;\n    }\n    return el ? el : null;\n  },\n  getNodeMatrix(cellView, node) {\n    const {\n      options\n    } = this;\n    const {\n      layer\n    } = options;\n    const {\n      rotatableNode\n    } = cellView;\n    const nodeMatrix = cellView.getNodeMatrix(node);\n    if (rotatableNode) {\n      if (layer) {\n        if (rotatableNode.contains(node)) {\n          return nodeMatrix;\n        }\n        // The node is outside of the rotatable group.\n        // Compensate the rotation set by transformGroup.\n        return cellView.getRootRotateMatrix().inverse().multiply(nodeMatrix);\n      } else {\n        return cellView.getNodeRotateMatrix(node).multiply(nodeMatrix);\n      }\n    }\n    return nodeMatrix;\n  },\n  mount() {\n    const {\n      MOUNTABLE,\n      cellView,\n      el,\n      options,\n      transformGroup,\n      detachedTransformGroup,\n      postponedUpdate,\n      nodeSelector\n    } = this;\n    if (!MOUNTABLE || transformGroup) return;\n    if (postponedUpdate) {\n      // The cellView was not mounted when the update was requested.\n      // The update was postponed until the cellView is mounted.\n      this.update(cellView, nodeSelector);\n      this.transform();\n      return;\n    }\n    const {\n      vel: cellViewRoot,\n      paper\n    } = cellView;\n    const {\n      layer: layerName\n    } = options;\n    if (layerName) {\n      let vGroup;\n      if (detachedTransformGroup) {\n        vGroup = detachedTransformGroup;\n        this.detachedTransformGroup = null;\n      } else {\n        vGroup = V('g').addClass('highlight-transform').append(el);\n      }\n      this.transformGroup = vGroup;\n      paper.getLayerView(layerName).insertSortedNode(vGroup.node, options.z);\n    } else {\n      // TODO: prepend vs append\n      if (!el.parentNode || el.nextSibling) {\n        // Not appended yet or not the last child\n        cellViewRoot.append(el);\n      }\n    }\n  },\n  unmount() {\n    const {\n      MOUNTABLE,\n      transformGroup,\n      vel\n    } = this;\n    if (!MOUNTABLE) return;\n    if (transformGroup) {\n      this.transformGroup = null;\n      this.detachedTransformGroup = transformGroup;\n      transformGroup.remove();\n    } else {\n      vel.remove();\n    }\n  },\n  transform() {\n    const {\n      transformGroup,\n      cellView,\n      updateRequested\n    } = this;\n    if (!transformGroup || cellView.model.isLink() || updateRequested) return;\n    const translateMatrix = cellView.getRootTranslateMatrix();\n    const rotateMatrix = cellView.getRootRotateMatrix();\n    const transformMatrix = translateMatrix.multiply(rotateMatrix);\n    transformGroup.attr('transform', V.matrixToTransformString(transformMatrix));\n  },\n  update() {\n    const {\n      node: prevNode,\n      cellView,\n      nodeSelector,\n      updateRequested,\n      id\n    } = this;\n    if (updateRequested) return;\n    this.postponedUpdate = false;\n    const node = this.node = this.findNode(cellView, nodeSelector);\n    if (prevNode) {\n      this.unhighlight(cellView, prevNode);\n    }\n    if (node) {\n      this.highlight(cellView, node);\n      this.mount();\n    } else {\n      this.unmount();\n      cellView.notify('cell:highlight:invalid', id, this);\n    }\n  },\n  onRemove() {\n    const {\n      node,\n      cellView,\n      id,\n      constructor\n    } = this;\n    if (node) {\n      this.unhighlight(cellView, node);\n    }\n    this.unmount();\n    constructor._removeRef(cellView, id);\n  },\n  highlight(_cellView, _node) {\n    // to be overridden\n  },\n  unhighlight(_cellView, _node) {\n    // to be overridden\n  },\n  // Update Attributes\n\n  listenToUpdateAttributes(cellView) {\n    const attributes = result(this, 'UPDATE_ATTRIBUTES');\n    if (!Array.isArray(attributes) || attributes.length === 0) return;\n    this.listenTo(cellView.model, 'change', this.onCellAttributeChange);\n  },\n  onCellAttributeChange() {\n    const {\n      cellView\n    } = this;\n    if (!cellView) return;\n    const {\n      model,\n      paper\n    } = cellView;\n    const attributes = result(this, 'UPDATE_ATTRIBUTES');\n    if (!attributes.some(attribute => model.hasChanged(attribute))) return;\n    paper.requestViewUpdate(this, this.HIGHLIGHT_FLAG, this.UPDATE_PRIORITY);\n  }\n}, {\n  _views: {},\n  // Used internally by CellView highlight()\n  highlight: function (cellView, node, opt) {\n    const id = this.uniqueId(node, opt);\n    this.add(cellView, node, id, opt);\n  },\n  // Used internally by CellView unhighlight()\n  unhighlight: function (cellView, node, opt) {\n    const id = this.uniqueId(node, opt);\n    this.remove(cellView, id);\n  },\n  get(cellView, id = null) {\n    const {\n      cid\n    } = cellView;\n    const {\n      _views\n    } = this;\n    const refs = _views[cid];\n    if (id === null) {\n      // all highlighters\n      const views = [];\n      if (!refs) return views;\n      for (let hid in refs) {\n        const ref = refs[hid];\n        if (ref instanceof this) {\n          views.push(ref);\n        }\n      }\n      return views;\n    } else {\n      // single highlighter\n      if (!refs) return null;\n      if (id in refs) {\n        const ref = refs[id];\n        if (ref instanceof this) return ref;\n      }\n      return null;\n    }\n  },\n  add(cellView, nodeSelector, id, opt = {}) {\n    if (!id) throw new Error('dia.HighlighterView: An ID required.');\n    // Search the existing view amongst all the highlighters\n    const previousView = HighlighterView.get(cellView, id);\n    if (previousView) previousView.remove();\n    const view = new this(opt);\n    view.id = id;\n    this._addRef(cellView, id, view);\n    view.requestUpdate(cellView, nodeSelector);\n    view.listenToUpdateAttributes(cellView);\n    return view;\n  },\n  _addRef(cellView, id, view) {\n    const {\n      cid\n    } = cellView;\n    const {\n      _views\n    } = this;\n    let refs = _views[cid];\n    if (!refs) refs = _views[cid] = {};\n    refs[id] = view;\n  },\n  _removeRef(cellView, id) {\n    const {\n      cid\n    } = cellView;\n    const {\n      _views\n    } = this;\n    const refs = _views[cid];\n    if (!refs) return;\n    if (id) delete refs[id];\n    for (let _ in refs) return;\n    delete _views[cid];\n  },\n  remove(cellView, id = null) {\n    toArray(this.get(cellView, id)).forEach(view => {\n      view.remove();\n    });\n  },\n  removeAll(paper, id = null) {\n    const {\n      _views\n    } = this;\n    for (let cid in _views) {\n      for (let hid in _views[cid]) {\n        const view = _views[cid][hid];\n        if (view.cellView.paper === paper && view instanceof this && (id === null || hid === id)) {\n          view.remove();\n        }\n      }\n    }\n  },\n  update(cellView, id = null, dirty = false) {\n    toArray(this.get(cellView, id)).forEach(view => {\n      if (dirty || view.UPDATABLE) view.update();\n    });\n  },\n  transform(cellView, id = null) {\n    toArray(this.get(cellView, id)).forEach(view => {\n      if (view.UPDATABLE) view.transform();\n    });\n  },\n  unmount(cellView, id = null) {\n    toArray(this.get(cellView, id)).forEach(view => view.unmount());\n  },\n  mount(cellView, id = null) {\n    toArray(this.get(cellView, id)).forEach(view => view.mount());\n  },\n  uniqueId(node, opt = '') {\n    return V.ensureId(node) + JSON.stringify(opt);\n  }\n});","map":{"version":3,"names":["mvc","V","isPlainObject","result","toArray","obj","Array","isArray","HighlighterView","View","extend","tagName","svgElement","className","HIGHLIGHT_FLAG","UPDATE_PRIORITY","DETACHABLE","UPDATABLE","MOUNTABLE","cellView","nodeSelector","node","updateRequested","postponedUpdate","transformGroup","detachedTransformGroup","requestUpdate","paper","requestViewUpdate","confirmUpdate","isMounted","update","mount","transform","findNode","el","isLink","model","label","port","selector","findLabelNode","findPortNode","toNode","SVGElement","getNodeMatrix","options","layer","rotatableNode","nodeMatrix","contains","getRootRotateMatrix","inverse","multiply","getNodeRotateMatrix","vel","cellViewRoot","layerName","vGroup","addClass","append","getLayerView","insertSortedNode","z","parentNode","nextSibling","unmount","remove","translateMatrix","getRootTranslateMatrix","rotateMatrix","transformMatrix","attr","matrixToTransformString","prevNode","id","unhighlight","highlight","notify","onRemove","constructor","_removeRef","_cellView","_node","listenToUpdateAttributes","attributes","length","listenTo","onCellAttributeChange","some","attribute","hasChanged","_views","opt","uniqueId","add","get","cid","refs","views","hid","ref","push","Error","previousView","view","_addRef","_","forEach","removeAll","dirty","ensureId","JSON","stringify"],"sources":["/Users/guankaiyuan/ReactTs/node_modules/.pnpm/@joint+core@4.0.1/node_modules/@joint/core/src/dia/HighlighterView.mjs"],"sourcesContent":["import * as mvc from '../mvc/index.mjs';\nimport V from '../V/index.mjs';\nimport { isPlainObject, result } from '../util/util.mjs';\n\nfunction toArray(obj) {\n    if (!obj) return [];\n    if (Array.isArray(obj)) return obj;\n    return [obj];\n}\n\nexport const HighlighterView = mvc.View.extend({\n\n    tagName: 'g',\n    svgElement: true,\n    className: 'highlight',\n\n    HIGHLIGHT_FLAG: 1,\n    UPDATE_PRIORITY: 3,\n    DETACHABLE: false,\n    UPDATABLE: true,\n    MOUNTABLE: true,\n\n    cellView: null,\n    nodeSelector: null,\n    node: null,\n    updateRequested: false,\n    postponedUpdate: false,\n    transformGroup: null,\n    detachedTransformGroup: null,\n\n    requestUpdate(cellView, nodeSelector) {\n        const { paper } = cellView;\n        this.cellView = cellView;\n        this.nodeSelector = nodeSelector;\n        if (paper) {\n            this.updateRequested = true;\n            paper.requestViewUpdate(this, this.HIGHLIGHT_FLAG, this.UPDATE_PRIORITY);\n        }\n    },\n\n    confirmUpdate() {\n        // The cellView is now rendered/updated since it has a higher update priority.\n        this.updateRequested = false;\n        const { cellView, nodeSelector } = this;\n        if (!cellView.isMounted()) {\n            this.postponedUpdate = true;\n            return 0;\n        }\n        this.update(cellView, nodeSelector);\n        this.mount();\n        this.transform();\n        return 0;\n    },\n\n    findNode(cellView, nodeSelector = null) {\n        let el;\n        if (typeof nodeSelector === 'string') {\n            el = cellView.findNode(nodeSelector);\n        } else if (isPlainObject(nodeSelector)) {\n            const isLink = cellView.model.isLink();\n            const { label = null, port, selector } = nodeSelector;\n            if (isLink && label !== null) {\n                // Link Label Selector\n                el = cellView.findLabelNode(label, selector);\n            } else if (!isLink && port) {\n                // Element Port Selector\n                el = cellView.findPortNode(port, selector);\n            } else {\n                // Cell Selector\n                el = cellView.findNode(selector);\n            }\n        } else if (nodeSelector) {\n            el = V.toNode(nodeSelector);\n            if (!(el instanceof SVGElement)) el = null;\n        }\n        return el ? el : null;\n    },\n\n    getNodeMatrix(cellView, node) {\n        const { options } = this;\n        const { layer } = options;\n        const { rotatableNode } = cellView;\n        const nodeMatrix = cellView.getNodeMatrix(node);\n        if (rotatableNode) {\n            if (layer) {\n                if (rotatableNode.contains(node)) {\n                    return nodeMatrix;\n                }\n                // The node is outside of the rotatable group.\n                // Compensate the rotation set by transformGroup.\n                return cellView.getRootRotateMatrix().inverse().multiply(nodeMatrix);\n            } else {\n                return cellView.getNodeRotateMatrix(node).multiply(nodeMatrix);\n            }\n        }\n        return nodeMatrix;\n    },\n\n    mount() {\n        const { MOUNTABLE, cellView, el, options, transformGroup, detachedTransformGroup, postponedUpdate, nodeSelector } = this;\n        if (!MOUNTABLE || transformGroup) return;\n        if (postponedUpdate) {\n            // The cellView was not mounted when the update was requested.\n            // The update was postponed until the cellView is mounted.\n            this.update(cellView, nodeSelector);\n            this.transform();\n            return;\n        }\n        const { vel: cellViewRoot, paper } = cellView;\n        const { layer: layerName } = options;\n        if (layerName) {\n            let vGroup;\n            if (detachedTransformGroup) {\n                vGroup = detachedTransformGroup;\n                this.detachedTransformGroup = null;\n            } else {\n                vGroup = V('g').addClass('highlight-transform').append(el);\n            }\n            this.transformGroup = vGroup;\n            paper.getLayerView(layerName).insertSortedNode(vGroup.node, options.z);\n        } else {\n            // TODO: prepend vs append\n            if (!el.parentNode || el.nextSibling) {\n                // Not appended yet or not the last child\n                cellViewRoot.append(el);\n            }\n        }\n    },\n\n    unmount() {\n        const { MOUNTABLE, transformGroup, vel } = this;\n        if (!MOUNTABLE) return;\n        if (transformGroup) {\n            this.transformGroup = null;\n            this.detachedTransformGroup = transformGroup;\n            transformGroup.remove();\n        } else {\n            vel.remove();\n        }\n    },\n\n    transform() {\n        const { transformGroup, cellView, updateRequested } = this;\n        if (!transformGroup || cellView.model.isLink() || updateRequested) return;\n        const translateMatrix = cellView.getRootTranslateMatrix();\n        const rotateMatrix = cellView.getRootRotateMatrix();\n        const transformMatrix = translateMatrix.multiply(rotateMatrix);\n        transformGroup.attr('transform', V.matrixToTransformString(transformMatrix));\n    },\n\n    update() {\n        const { node: prevNode, cellView, nodeSelector, updateRequested, id } = this;\n        if (updateRequested) return;\n        this.postponedUpdate = false;\n        const node = this.node = this.findNode(cellView, nodeSelector);\n        if (prevNode) {\n            this.unhighlight(cellView, prevNode);\n        }\n        if (node) {\n            this.highlight(cellView, node);\n            this.mount();\n        } else {\n            this.unmount();\n            cellView.notify('cell:highlight:invalid', id, this);\n        }\n    },\n\n    onRemove() {\n        const { node, cellView, id, constructor } = this;\n        if (node) {\n            this.unhighlight(cellView, node);\n        }\n        this.unmount();\n        constructor._removeRef(cellView, id);\n    },\n\n    highlight(_cellView, _node) {\n        // to be overridden\n    },\n\n    unhighlight(_cellView, _node) {\n        // to be overridden\n    },\n\n    // Update Attributes\n\n    listenToUpdateAttributes(cellView) {\n        const attributes = result(this, 'UPDATE_ATTRIBUTES');\n        if (!Array.isArray(attributes) || attributes.length === 0) return;\n        this.listenTo(cellView.model, 'change', this.onCellAttributeChange);\n    },\n\n    onCellAttributeChange() {\n        const { cellView } = this;\n        if (!cellView) return;\n        const { model, paper } = cellView;\n        const attributes = result(this, 'UPDATE_ATTRIBUTES');\n        if (!attributes.some(attribute => model.hasChanged(attribute))) return;\n        paper.requestViewUpdate(this, this.HIGHLIGHT_FLAG, this.UPDATE_PRIORITY);\n    }\n\n}, {\n\n    _views: {},\n\n    // Used internally by CellView highlight()\n    highlight: function(cellView, node, opt) {\n        const id = this.uniqueId(node, opt);\n        this.add(cellView, node, id, opt);\n    },\n\n    // Used internally by CellView unhighlight()\n    unhighlight: function(cellView, node, opt) {\n        const id = this.uniqueId(node, opt);\n        this.remove(cellView, id);\n    },\n\n    get(cellView, id = null) {\n        const { cid } = cellView;\n        const { _views } = this;\n        const refs = _views[cid];\n        if (id === null) {\n            // all highlighters\n            const views = [];\n            if (!refs) return views;\n            for (let hid in refs) {\n                const ref = refs[hid];\n                if (ref instanceof this) {\n                    views.push(ref);\n                }\n            }\n            return views;\n        } else {\n            // single highlighter\n            if (!refs) return null;\n            if (id in refs) {\n                const ref = refs[id];\n                if (ref instanceof this) return ref;\n            }\n            return null;\n        }\n    },\n\n    add(cellView, nodeSelector, id, opt = {}) {\n        if (!id) throw new Error('dia.HighlighterView: An ID required.');\n        // Search the existing view amongst all the highlighters\n        const previousView = HighlighterView.get(cellView, id);\n        if (previousView) previousView.remove();\n        const view = new this(opt);\n        view.id = id;\n        this._addRef(cellView, id, view);\n        view.requestUpdate(cellView, nodeSelector);\n        view.listenToUpdateAttributes(cellView);\n        return view;\n    },\n\n    _addRef(cellView, id, view) {\n        const { cid } = cellView;\n        const { _views } = this;\n        let refs = _views[cid];\n        if (!refs) refs = _views[cid] = {};\n        refs[id] = view;\n    },\n\n    _removeRef(cellView, id) {\n        const { cid } = cellView;\n        const { _views } = this;\n        const refs = _views[cid];\n        if (!refs) return;\n        if (id) delete refs[id];\n        for (let _ in refs) return;\n        delete _views[cid];\n    },\n\n    remove(cellView, id = null) {\n        toArray(this.get(cellView, id)).forEach(view => {\n            view.remove();\n        });\n    },\n\n    removeAll(paper, id = null) {\n        const { _views } = this;\n\n        for (let cid in _views) {\n            for (let hid in _views[cid]) {\n                const view = _views[cid][hid];\n\n                if (view.cellView.paper === paper && view instanceof this && (id === null || hid === id)) {\n                    view.remove();\n                }\n            }\n        }\n    },\n\n    update(cellView, id = null, dirty = false) {\n        toArray(this.get(cellView, id)).forEach(view => {\n            if (dirty || view.UPDATABLE) view.update();\n        });\n    },\n\n    transform(cellView, id = null) {\n        toArray(this.get(cellView, id)).forEach(view => {\n            if (view.UPDATABLE) view.transform();\n        });\n    },\n\n    unmount(cellView, id = null) {\n        toArray(this.get(cellView, id)).forEach(view => view.unmount());\n    },\n\n    mount(cellView, id = null) {\n        toArray(this.get(cellView, id)).forEach(view => view.mount());\n    },\n\n    uniqueId(node, opt = '') {\n        return V.ensureId(node) + JSON.stringify(opt);\n    }\n\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}